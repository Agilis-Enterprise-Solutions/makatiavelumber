<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <record id="sh_purchase_order_history_form_view_inherit" model="ir.ui.view">
        <field name="name">purchase.order.history.form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form" />
        <field name="arch" type="xml">
            <xpath expr="//page[1]" position="after">
                <page string="Order History">
                	<field name="enable_purchase_reorder" invisible="1" />
                    <button name="action_all_purchase_reorder" type="object" string="All Lines Reorder" attrs="{'invisible':[('enable_purchase_reorder','=',False)]}" style="margin-top: 12px; margin-bottom: 12px;" />
                    <field name="order_history_line">
                        <tree string="Order Histroy" editable="bottom" create="false">
                            <field name="purchase_reorder" nolabel="1" optional="show"/>
                            <field name="po_id" string="Purchase Order" optional="show"/>
                            <field name="name" invisible="1" />
                            <field name="product_id" optional="show"/>
                            <field name="date_order" optional="show"/>
                            <field name="price_unit" string="Price" optional="show"/>
                            <field name="product_qty" optional="show"/>
                            <field name="product_uom" string="Unit" optional="show"/>
                            <field name="price_subtotal" optional="show"/>
                            <field name="enable_purchase_reorder" invisible="1" />
                            <field name="status" optional="show" widget="badge" decoration-success="status == 'purchase' or status == 'done'" decoration-warning="status == 'to approve'" decoration-info="status == 'draft' or status == 'sent'"/>
                            <button name="purchases_reorder" class="fa fa-retweet btn btn-light text-primary" title=" " type="object" attrs="{'invisible':[('enable_purchase_reorder','=',False)]}" />
                            <button name="view_purchase_reorder" class="fa fa-eye btn btn-light text-primary" title=" " type="object" />
                        </tree>
                        <form string="Order Histroy">
                            <sheet>
                                <group>
                                    <group>
                                        <field name="po_id" string="Purchase Order" />
                                        <field name="price_unit" string="Price" />
                                        <field name="product_uom" string="Unit" />
                                        <field name="date_order" />
                                    </group>
                                    <group>
                                        <field name="product_id" />
                                        <field name="product_qty" />
                                        <field name="price_subtotal" />
                                        <field name="status" optional="show" widget="badge" decoration-success="status == 'purchase' or status == 'done'" decoration-warning="status == 'to approve'" decoration-info="status == 'draft' or status == 'sent'"/>
                                    </group>
                                </group>
                            </sheet>
                        </form>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
